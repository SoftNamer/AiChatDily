# Dify Vue3 æ™ºèƒ½å®¢æœç³»ç»Ÿ

åŸºäº Dify å·¥ä½œæµçš„ Vue3 æ™ºèƒ½å®¢æœé—®ç­”ç³»ç»Ÿï¼Œä¸“ä¸ºæ‚¨æ‰“é€ ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- âœ¨ **ç°ä»£åŒ–ç•Œé¢**: é‡‡ç”¨ Vue3 + Composition API æ„å»º
- ğŸ”„ **æµå¼å“åº”**: æ”¯æŒå®æ—¶æ‰“å­—æœºæ•ˆæœçš„æµå¼å¯¹è¯
- ğŸ’¬ **ä¼šè¯æŒä¹…åŒ–**: ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒè¿ç»­å¯¹è¯
- ğŸ“± **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ¨ **ç¾è§‚UI**: æ¸å˜è‰²å½©å’Œæµç•…åŠ¨ç”»æ•ˆæœ
- âš¡ **é«˜æ€§èƒ½**: åŸºäº Vite æ„å»ºï¼Œå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Vue 3.3+
- **æ„å»ºå·¥å…·**: Vite 4.4+
- **HTTP å®¢æˆ·ç«¯**: Fetch API (åŸç”Ÿ)
- **CSS é¢„å¤„ç†**: åŸç”Ÿ CSS3 (æ”¯æŒå˜é‡å’ŒåŠ¨ç”»)
- **Markdown æ¸²æŸ“**: Marked.js
- **å¼€å‘è¯­è¨€**: JavaScript ES6+

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Node.js 16.0+
- npm 7.0+ æˆ– yarn 1.22+
- ç°ä»£æµè§ˆå™¨ (Chrome 88+, Firefox 78+, Safari 14+)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½® API

ç¼–è¾‘ `src/composables/useDifyChat.js` æ–‡ä»¶ï¼Œç¡®è®¤ä»¥ä¸‹é…ç½®ï¼š

```javascript
// Dify APIé…ç½®
const API_BASE_URL = '/v1'
const API_KEY = '' // æ‚¨çš„ Dify API Key
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æµè§ˆå™¨è®¿é—® `http://localhost:3000` å³å¯ä½¿ç”¨ã€‚

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

## ğŸ”§ é…ç½®è¯´æ˜

### API é…ç½®

é¡¹ç›®é»˜è®¤é…ç½®äº†ä»£ç†ï¼Œå°† `/v1` è·¯å¾„ä»£ç†åˆ°æœ¬åœ° Dify æœåŠ¡ï¼š

```javascript
// vite.config.js
proxy: {
  '/v1': {
    target: 'http://127.0.0.1',
    changeOrigin: true,
    secure: false
  }
}
```

### Dify å·¥ä½œæµé›†æˆ

ç³»ç»Ÿé›†æˆäº†å®Œæ•´çš„ Dify å·¥ä½œæµäº‹ä»¶å¤„ç†ï¼š

- `workflow_started`: å·¥ä½œæµå¼€å§‹æ‰§è¡Œ
- `node_started`: èŠ‚ç‚¹å¼€å§‹æ‰§è¡Œ  
- `node_finished`: èŠ‚ç‚¹æ‰§è¡Œå®Œæˆ
- `message`: æµå¼æ–‡æœ¬æ¶ˆæ¯
- `message_end`: æ¶ˆæ¯ç»“æŸ
- `workflow_finished`: å·¥ä½œæµå®Œæˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
dify-vue3-chat-demo/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # Vue ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ChatInterface.vue
â”‚   â”œâ”€â”€ composables/        # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â””â”€â”€ useDifyChat.js
â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js            # åº”ç”¨å…¥å£
â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”œâ”€â”€ vite.config.js         # Vite é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å¯¹è¯

1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
2. ç‚¹å‡»"å‘é€"æŒ‰é’®æˆ–æŒ‰ Enter é”®
3. ç³»ç»Ÿå°†å®æ—¶æ˜¾ç¤º AI çš„å›å¤

### ä¼šè¯ç®¡ç†

- ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ä¼šè¯ä¸Šä¸‹æ–‡
- æ”¯æŒè¿ç»­å¤šè½®å¯¹è¯
- ä¼šè¯ ID è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†

### æ”¯æŒçš„æŸ¥è¯¢ç¤ºä¾‹

- "æœ‰å‡ ä¸ªç¾½æ¯›çƒåœºï¼Ÿ"
- "ç¾½æ¯›çƒé¦†çš„å¼€æ”¾æ—¶é—´æ˜¯ä»€ä¹ˆï¼Ÿ"
- "å¦‚ä½•é¢„è®¢ç¾½æ¯›çƒåœºåœ°ï¼Ÿ"
- "åœºé¦†ä½ç½®åœ¨å“ªé‡Œï¼Ÿ"

## ğŸ” API æ¥å£è¯´æ˜

### å‘é€èŠå¤©æ¶ˆæ¯

```javascript
// è¯·æ±‚æ ¼å¼
{
  "query": "ç”¨æˆ·è¾“å…¥çš„é—®é¢˜",
  "response_mode": "streaming",
  "conversation_id": "ä¼šè¯IDï¼ˆå¯é€‰ï¼‰",
  "user": "ç”¨æˆ·æ ‡è¯†",
  "inputs": {},
  "files": []
}

// å“åº”æ ¼å¼ï¼ˆæµå¼ï¼‰
data: {"event": "message", "answer": "å›å¤å†…å®¹", ...}
data: {"event": "message_end", "metadata": {...}}
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **API è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ Dify æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
   - ç¡®è®¤ API Key æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **æ¶ˆæ¯æ˜¾ç¤ºå¼‚å¸¸**
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
   - ç¡®è®¤ Marked.js æ˜¯å¦æ­£ç¡®åŠ è½½

3. **æµå¼å“åº”ä¸­æ–­**
   - æ£€æŸ¥ç½‘ç»œç¨³å®šæ€§
   - ç¡®è®¤æœåŠ¡å™¨ SSE æ”¯æŒ

### å¼€å‘è°ƒè¯•

å¼€å¯æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š

```javascript
console.log('å‘é€è¯·æ±‚åˆ°Dify API:', requestBody)
console.log('æ”¶åˆ°æ•°æ®å—:', data)
console.log('å·¥ä½œæµå®Œæˆ:', data.data.status)
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Dify](https://dify.ai/) - æä¾›å¼ºå¤§çš„ AI å·¥ä½œæµå¹³å°
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

---

ğŸ’¡ **æç¤º**: å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥çœ‹é¡¹ç›® Issues æˆ–åˆ›å»ºæ–°çš„ Issueã€‚ 